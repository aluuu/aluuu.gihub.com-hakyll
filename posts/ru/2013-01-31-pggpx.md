---
layout: post
title: pggpx, расстояние в метрах
tags: ["clojure", "gis"]
---

Замутил разбиение трека на сегменты для своего небольшого [проектика на Clojure](https://github.com/aluuu/pggpx).

Из полезного:
* запилилась [формула Винценти](http://en.wikipedia.org/wiki/Vincenty's_formulae) для вычисления расстояния в метрах между двумя точками в проекции WGS84;
* немного адаптировал стандартные partition-by и take-while для своих нужд, а именно заставил принимать функцию-сплиттер, принимающую не только текущий элемент последовательности, но и предыдущий («принимать ..., принимающую ...» — обожаю ФП, лол).
